---
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar.astro';
import Header from '../../components/Header.astro';
import InfoBar from '../../components/InfoBar.astro';
import Footer from '../../components/Footer.astro';
import ArticleCard from '../../components/ArticleCard.astro';
import siteData from '../../data/site.json';

// Sort articles by date (newest first)
const articles = [...siteData.articles].sort((a, b) => {
  return new Date(b.date).getTime() - new Date(a.date).getTime();
});

const pageTitle = `Articles | ${siteData.name}`;
const pageDescription = `Read the latest stories and updates from ${siteData.name}.`;
---

<Layout title={pageTitle} description={pageDescription}>
  <Navbar />
  <Header />
  <InfoBar />
  
  <main id="main-content">
    <section class="articles section" aria-labelledby="articles-title">
      <div class="container">
        <h1 id="articles-title" class="section__title">Articles</h1>
        
        {articles.length > 0 ? (
          <div class="articles__grid">
            {articles.map((article) => (
              <ArticleCard
                slug={article.slug}
                title={article.title}
                excerpt={article.excerpt}
                date={article.date}
                author={article.author}
                coverImage={article.coverImage}
              />
            ))}
          </div>
        ) : (
          <div class="articles__empty">
            <p class="articles__empty-text">No articles available yet. Check back soon!</p>
          </div>
        )}
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>

<style>
  .articles__grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--space-8);
    margin-top: var(--space-10);
  }
  
  .articles__empty {
    text-align: center;
    padding: var(--space-16) var(--space-4);
  }
  
  .articles__empty-text {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    font-style: italic;
  }
  
  @media (max-width: 768px) {
    .articles__grid {
      grid-template-columns: 1fr;
      gap: var(--space-6);
    }
  }
  
  @media (max-width: 640px) {
    .articles__grid {
      gap: var(--space-4);
    }
  }
</style>

